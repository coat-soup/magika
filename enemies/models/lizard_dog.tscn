[gd_scene load_steps=16 format=3 uid="uid://jkff41dckob7"]

[ext_resource type="PackedScene" uid="uid://bgb2xrpeyndwg" path="res://enemies/models/lizard_dog.glb" id="1_qfeps"]
[ext_resource type="Texture2D" uid="uid://3y0n1iwnej2b" path="res://enemies/textures/lizard_dog.png" id="2_1rsmu"]
[ext_resource type="Script" uid="uid://b1ysd8m75sqac" path="res://enemies/models/enemy_skeleton_controller.gd" id="2_qwepj"]
[ext_resource type="Script" uid="uid://dki43vwwc5g84" path="res://addons/jigglebones/jigglebone.gd" id="3_qdm1w"]
[ext_resource type="Script" uid="uid://c502nttr0si3w" path="res://system/audio_pitch_randomizer.gd" id="5_5wf06"]
[ext_resource type="AudioStream" uid="uid://dt5ky0o8oob51" path="res://sfx/wet_footstep.wav" id="5_kuwy2"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_qdm1w"]
albedo_texture = ExtResource("2_1rsmu")
texture_filter = 0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_qwepj"]
albedo_texture = ExtResource("2_1rsmu")
emission_enabled = true
emission = Color(0.325438, 0, 0.0268873, 1)
emission_energy_multiplier = 5.61
texture_filter = 0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_1rsmu"]
cull_mode = 2
albedo_texture = ExtResource("2_1rsmu")
texture_filter = 0

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_kuwy2"]
filters = ["", "Armature/Skeleton3D:BackFoot.L", "Armature/Skeleton3D:BackFoot.R", "Armature/Skeleton3D:BackFootIK.L", "Armature/Skeleton3D:BackFootIK.R", "Armature/Skeleton3D:BackLegLower.L", "Armature/Skeleton3D:BackLegLower.R", "Armature/Skeleton3D:BackLegUpper.L", "Armature/Skeleton3D:BackLegUpper.R", "Armature/Skeleton3D:FrontFoot.L", "Armature/Skeleton3D:FrontFoot.R", "Armature/Skeleton3D:FrontFootIK.L", "Armature/Skeleton3D:FrontFootIK.R", "Armature/Skeleton3D:FrontLegLower.L", "Armature/Skeleton3D:FrontLegLower.R", "Armature/Skeleton3D:FrontLegUpper.L", "Armature/Skeleton3D:FrontLegUpper.R", "Armature/Skeleton3D:Head", "Armature/Skeleton3D:Hip", "Armature/Skeleton3D:Neck", "Armature/Skeleton3D:Tail", "Armature/Skeleton3D:Torso"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_5wf06"]
animation = &"Attack"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_qdm1w"]
animation = &"Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_qwepj"]
animation = &"Move"
use_custom_timeline = true
timeline_length = 0.6
stretch_time_scale = true
start_offset = 0.0
loop_mode = 1

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_qwepj"]
blend_point_0/node = SubResource("AnimationNodeAnimation_qdm1w")
blend_point_0/pos = 0.0
blend_point_1/node = SubResource("AnimationNodeAnimation_qwepj")
blend_point_1/pos = 1.0
min_space = 0.0

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_5wf06"]
nodes/Attack/node = SubResource("AnimationNodeOneShot_kuwy2")
nodes/Attack/position = Vector2(100, 140)
nodes/AttackAnim/node = SubResource("AnimationNodeAnimation_5wf06")
nodes/AttackAnim/position = Vector2(-220, 260)
nodes/MoveBlend/node = SubResource("AnimationNodeBlendSpace1D_qwepj")
nodes/MoveBlend/position = Vector2(-200, 40)
nodes/output/position = Vector2(440, 140)
node_connections = [&"Attack", 0, &"MoveBlend", &"Attack", 1, &"AttackAnim", &"output", 0, &"Attack"]

[node name="lizard_dog" instance=ExtResource("1_qfeps")]
script = ExtResource("2_qwepj")

[node name="Skeleton3D" parent="Armature" index="0"]
bones/0/position = Vector3(4.62646e-10, -0.00535713, -0.0860328)
bones/1/rotation = Quaternion(4.20598e-09, 1.54479e-07, 0.106922, 0.994267)
bones/3/rotation = Quaternion(-0.0103877, 0.00820672, -0.611808, 0.790896)
bones/4/rotation = Quaternion(-3.03356e-08, 1.25981e-07, 0.0679102, 0.997691)
bones/5/rotation = Quaternion(0.156482, 0.220125, 0.678767, 0.682887)
bones/6/rotation = Quaternion(-0.465469, -0.0127871, 0.105018, 0.878719)
bones/7/rotation = Quaternion(0.0534037, 0.057143, -0.825694, 0.55867)
bones/8/rotation = Quaternion(-0.0618424, -0.102159, 0.870394, 0.477654)
bones/9/rotation = Quaternion(0.167156, -0.022431, 0.1098, 0.979541)
bones/10/rotation = Quaternion(-0.0534039, -0.057143, -0.825694, 0.55867)
bones/11/rotation = Quaternion(0.0211564, -0.106127, 0.993399, -0.0380508)
bones/14/rotation = Quaternion(0.0387595, 0.0551752, 0.862454, 0.501624)
bones/15/rotation = Quaternion(-0.117446, 0.0165673, 0.244022, 0.962489)
bones/16/rotation = Quaternion(0.0357479, 0.0402474, -0.817954, 0.57276)
bones/17/rotation = Quaternion(-0.0888616, -0.0949398, 0.593086, 0.794569)
bones/18/rotation = Quaternion(0.263543, 0.00139422, 0.30105, 0.916467)
bones/19/rotation = Quaternion(-0.0357482, -0.040247, -0.817954, 0.57276)
bones/20/position = Vector3(0.216407, -0.386286, 0.985972)
bones/20/rotation = Quaternion(0.466686, -0.531229, 0.531229, -0.466686)
bones/21/position = Vector3(-0.216407, -0.396681, 0.701443)
bones/22/position = Vector3(0.160315, -0.37037, -0.202401)
bones/22/rotation = Quaternion(0.477692, -0.521354, 0.521354, -0.477692)
bones/23/position = Vector3(-0.160315, -0.377814, 0.1408)

[node name="Cube" parent="Armature/Skeleton3D" index="0"]
surface_material_override/0 = SubResource("StandardMaterial3D_qdm1w")

[node name="Cube_001" parent="Armature/Skeleton3D" index="1"]
surface_material_override/0 = SubResource("StandardMaterial3D_qwepj")

[node name="Plane" parent="Armature/Skeleton3D" index="2"]
surface_material_override/0 = SubResource("StandardMaterial3D_1rsmu")

[node name="Plane_001" parent="Armature/Skeleton3D" index="3"]
surface_material_override/0 = SubResource("StandardMaterial3D_1rsmu")

[node name="JiggleTail" type="Node3D" parent="Armature/Skeleton3D" index="4"]
transform = Transform3D(0.0130208, 0.122058, 0.992439, -0.999847, 0.0132082, 0.0114936, -0.0117055, -0.992435, 0.122211, 0.366488, 0.135043, -1.08841)
top_level = true
script = ExtResource("3_qdm1w")
bone_name = "TailTop"
forward_axis = 1
metadata/_custom_type_script = "uid://dki43vwwc5g84"

[node name="JiggleTail2" type="Node3D" parent="Armature/Skeleton3D" index="5"]
transform = Transform3D(-0.00124919, -0.0542093, 0.99853, -0.987658, -0.156322, -0.00972218, 0.156619, -0.986217, -0.053345, -0.216745, -0.414052, -1.40293)
top_level = true
script = ExtResource("3_qdm1w")
bone_name = "TailTip"
stiffness = 0.2
gravity = Vector3(0, 0, 0)
forward_axis = 1
metadata/_custom_type_script = "uid://dki43vwwc5g84"

[node name="AnimationTree" type="AnimationTree" parent="." index="2"]
tree_root = SubResource("AnimationNodeBlendTree_5wf06")
anim_player = NodePath("../AnimationPlayer")
parameters/Attack/active = false
parameters/Attack/internal_active = false
parameters/Attack/request = 0
parameters/MoveBlend/blend_position = 1.0

[node name="FootstepAudio" type="AudioStreamPlayer3D" parent="." index="3"]
stream = ExtResource("5_kuwy2")
unit_size = 20.0
max_distance = 20.0
script = ExtResource("5_5wf06")
